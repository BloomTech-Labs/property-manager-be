<!DOCTYPE html>
<html>

<head>
  <title>Property Manager Backend</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <style>
    body { 
      background-color: #202020; 
      color: #ebebeb; 
      margin: 30px 20px;
    }
    button {
      background-color: #202020;
      border: 2px darkgray solid;
      color: white;
      padding: 5px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 10px;
      margin: 4px 10px;
      cursor: pointer;
      position:relative;
      top: -5px;
    }
    button:hover { background-color: darkgray; }
    a { color: antiquewhite; }
    h1, h2, h3 { position:relative; cursor: pointer;  }
    .show { display: block; }
    .hid { display: none; } 
    .moreInfo { position:relative; left: 5px; }
    .moreInfo:hover { color: lightskyblue; }
    h2.moreInfo:hover { text-decoration: underline wavy; }
    li.moreInfo { position:relative; left: -20px; cursor: pointer; }
    #main { min-width: 400px; padding-bottom: 100px; }
    #leftMenu { left: 5px; }
    #leftMenu h3 { padding-left: 45px; }
    #leftMenu ul { padding-left: 85px; }
    .moreContent {
      min-width: 500px;
      width: 50%;
      position: absolute;
      left: 400px;
      top: 20px;
      padding-bottom: 100px;
    }
    pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; color: lightgreen;}
    code { color: lime; }
    code p { margin: 0; }
    .ident { padding-left: 15px; }
    .ident2 { padding-left: 40px; }
    .codesnip { color: lightgreen; }
    .alert { color: red; font-weight: bold; }
    .todo {  color: yellow; }
    .comment { color: lightseagreen; }

  </style>
  <!-- <script> 
    var obj = {}; 
  </script> -->
</head>

<body>

<div id="main">

  <!-- Left Side Menu -->
  <div id="leftMenu">
  <!-- Not sure this is needed.
    <h1 onclick="{showContent('pitch')}"><button>v</button> Pitch</h1>
    <p id='pitch' class="hid">Add pitch here.</p>

    <h1 onclick="{showContent('product_canvas')}"><button>v</button> Product Canvas</h1>
      <div id="product_canvas" class="hid">
      <h2 onclick="{showContent('proposal')}"><button>v</button> Proposal</h2>
        <div id="proposal" class="hid">
        <h3>What problem does your app solve?</h3>
          <p> </p>

        <h3>Be as specific as possible; how does your app solve the problem?</h3>
          <p>This app will allow:</p>
          <ul>
            <li>The user to login</li>
          </ul>
        </div>
      </div> 
  -->

    <h1 onclick="{showContent('planning')}">Planning</h1>

    <h1 onclick="{showContent('developmentBE')}">Development Back End</h1>
    <div id="developmentBE" class="show">

      <h2 class="moreInfo" onclick="{showContent('models')}"><button>v</button> Models</h2>
      <div id="models" class="hid">
        <ul>
          <li class="moreInfo" onclick="{modelsUsers()}">User Models</li>
          <li class="moreInfo" onclick="{modelsProperty()}">Property Models</li>
          <li class="moreInfo" onclick="{modelsTenantHistory()}">Tenant History Model</li>
        </ul>
      </div>

      <h2 class="moreInfo" onclick="{showContent('endpoints')}"><button>v</button> Endpoints</h2>
      <div id="endpoints" class="hid">

        <h3 class="moreInfo" onclick="{showContent('userEndpoints')}">User Endpoints</h3>
        <div id="userEndpoints" class="hid">
          <ul>
            <li class="moreInfo" onclick="{showContent('signup')}">Sign Up</li>
            <li class="moreInfo" onclick="{showContent('login')}">Login</li>
            <li class="moreInfo" onclick="{showContent('updateUser')}">Update User</li>
            <li class="moreInfo" onclick="{showContent('deleteUser')}">Delete User</li>
          </ul>
        </div>

        <h3 class="moreInfo" onclick="{showContent('propertyEndpoints')}">Property Endpoints</h3>
        <div id="propertyEndpoints" class="hid">
          <ul>
            <li class="moreInfo" onclick="{showContent('getAllProperties')}">Get All Properties</li>
          </ul>
        </div>
        
      </div>
      
      <h2 class="moreInfo" onclick="{showContent('database')}"><button>v</button> Database Structure</h2>
      <div id="database" class="hid">
        <ul>
          <li class="moreInfo" onclick="{dbUsers()}">Users Table</li> 
          <li class="moreInfo" onclick="{dbProperty()}">Properties Table</li>
          <li class="moreInfo" onclick="{dbTenantHistory()}">Tenant History Table</li>
        </ul>
      </div>

    </div>
  </div>
  
  <!-- Right Side Content -->
  <div id="#content" class="moreContent">

    <!-- Color Key -->
    <div style="float: right;">
      Color Key: <br />
      <span class="codesnip">Code - lightgreen</span> <br />
      <span class="todo">ToDo - Yellow</span> <br />
      <span class="alert">Alert - red</span> <br />
      <span class="comment">Commnet - lightseagreen</span>
    </div>
    
    <!-- How to Use this resource. -->
    <div style="color: lightgoldenrodyellow; text-align: center">
      Click on the list items to the left to open and close sections. <br />
      Click on the Header below to close a section. <br /><br />
    </div>

    <!-- Latest Changes -->
    <div class="comment">
      <strong>Latest changes include: </strong>
      <ul>
        <li>Knex Setup for Database</li>
      </ul>
    </div>

    <!-- Planning -->
    <div id="planning" class="show">
      <h2>Notion Product Board</h2>
      <a href="https://www.notion.so/Property-Manager-bd4c33b5c8974b8aa938512b993f9108">Property Manager</a>

      <h2>Trello Boards</h2>
      <a href="https://trello.com/b/mKfgx81y/property-manager">Property Manager</a> <br />
      <a href="https://trello.com/b/llCWH1QF/property-manager-retrospective">Property Manager Retrospective</a>
    </div>

    <!-- Content Container -->
    <div id="contentContainer"></div>

    <!-- #region - User Endpoints --> 
    <!-- User Endpoint - SignUp --> 
    <div id="signup" class="hid">
      <h2>Example need to Edit</h2>
      <h2>TODO - this is not active yet</h2>
      <h3 onclick="{showContent('signup')}">User Endpoints - Signup</h3>
      <p><strong>Endpoint:</strong> `/api/auth/register`</p>
      <p><strong>Type:</strong> `POST`</p>
      <p><strong>Description:</strong> </p>
      <code>
        Sign up a new user
      </code>
      <p><strong>Expected Input:</strong> </p>
      <code>
          // username and email must be unique <br />
          // username, password, and email are required <br />
          <br />
          "username": "testuser", <br />
          "password": "password", <br />
      </code>
      <p><strong>Sample Request:</strong> </p>
      <code>
        <br />
      </code>
      <p><strong>Expected Return:</strong> </p>
      <code>
          <br />
      </code>
      <p><strong>Expected Return if Fails:</strong> </p>
      <code>
          <br />
      </code>
    </div>
    
    <!-- User Endpoint - Login --> 
    <div id="login" class="hid">
      <h2>Example need to Edit</h2>
      <h2>TODO - this is not active yet</h2>
      <h3 onclick="{showContent('login')}">User Endpoints - Login</h3>
      <p><strong>Endpoint:</strong> `/api/auth/login`</p>
      <p><strong>Type:</strong> `POST`</p>
      <p><strong>Description:</strong> </p>
      <code>
        Gets authentication token for user with given credentials
      </code>
      <p><strong>Expected Input:</strong> </p>
      <code>
        "username": "SomeUser",  <br />
        "password": "TheirPassword"  <br />
      </code>
      <p><strong>Sample Request:</strong> </p>
      <code>
        const body = {  <br />
          "username": "SomeUser",  <br />
          "password": "TheirPassword"  <br />
        };  <br />
        <br />
        axios.post(`${BASE_URL}/api/auth/login`, body);
      </code>
      <p><strong>Expected Return:</strong> </p>
      <code>
        status = 200   <br />
        <br />
        {
          message: `Welcome SomeUser!`,
          token
        }
      </code>
      <p><strong>Expected Return if Fails:</strong> </p>
      <code>
        status = 401  <br />
        <br />
        { message: 'Invalid Request. Please check the username and password submitted.' }
      </code>
    </div>
  
    <!-- User Endpoint - Update --> 
    <div id="updateUser" class="hid">
      <h2>Example need to Edit</h2>
      <h2>TODO - this is not active yet</h2>
      <h3 onclick="{showContent('updateUser')}">User Endpoints - Update User</h3>
      <p><strong>Endpoint:</strong> `/api/auth/user/{id}`</p>
      <p><strong>Type:</strong> `PUT`</p>
      <p><strong>Description:</strong> </p>
      <code>
          Update user with given id
      </code>
      <p><strong>Expected Input:</strong> </p>
      <code>
        {
          "username": "testuser", <br />
          "password": "password", <br />
          "email": "user@email.com", <br />
          "firstname": "Johnathan", <br />
          "lastname": "Doe", <br />
          "preferredname": "John", <br />
          "group_id": null <br />
        }
      </code>
      <p><strong>Sample Request:</strong> </p>
      <code>
        <br />
      </code>
      <p><strong>Expected Return:</strong> </p>
      <code>
          <br />
      </code>
      <p><strong>Expected Return if Fails:</strong> </p>
      <code>
          <br />
      </code>
    </div>
  
    <!-- User Endpoint - Delete --> 
    <div id="deleteUser" class="hid">
      <h2>Example need to Edit</h2>
      <h2>TODO - this is not active yet</h2>
      <h3 onclick="{showContent('deleteUser')}">User Endpoints - Delete User</h3>
      <p><strong>Endpoint:</strong> `/api/auth/user/{id}`</p>
      <p><strong>Type:</strong> `DELETE`</p>
      <p><strong>Description:</strong> </p>
      <code>
          Delete user with given id
      </code>
      <p><strong>Expected Input:</strong> </p>
      <code>
        {
          "id": 1 <br />
        }
      </code>
      <p><strong>Sample Request:</strong> </p>
      <code>
        <br />
      </code>
      <p><strong>Expected Return:</strong> </p>
      <code>
          <br />
      </code>
      <p><strong>Expected Return if Fails:</strong> </p>
      <code>
          <br />
      </code>
    </div>
    <!-- #endregion - User Endpoints -->

    <!-- #region - Property Endpoints --> 
    <div id="propertyEndpoints">
      <!-- Sample 
      <div id="replaceThis" class="hid">
        <h2>TODO - this is not active yet</h2>
        <h3 onclick="{showContent('replaceThis')}">This Endpoints - CreateReadUpdateDelete This</h3>
          <p><strong>Endpoint:</strong> `/api/this/{id}`</p>
          <p><strong>Type:</strong> `DELETE`</p> (GET, POST, PUT, DELETE)
          <p><strong>Description:</strong> </p>
          <code>
              Description
          </code>
          <p><strong>Expected Input:</strong> </p>
          <code>
            {
              <br />
            }
          </code>
          <p><strong>Sample Request:</strong> </p>
          <code>
            <br />
          </code>
          <p><strong>Expected Return:</strong> </p>
          <code>
              <br />
          </code>
          <p><strong>Expected Return if Fails:</strong> </p>
          <code>
              <br />
          </code>
      </div>
      --> 
    </div>
    <!-- #endregion - Property Endpoints -->

  </div>
  
  <script>

    function showContent(e) {
      const select = document.getElementById(e);
      select.classList.toggle("show");
      select.classList.toggle("hid");
    }

    function output(content) { 
      document.getElementById("planning").classList.remove("show");
      document.getElementById("planning").classList.add("hid");
      document.getElementById("contentContainer").innerHTML = content; 
    }
    
    // Initial Display Setup
    var outputContent = "<h3>Content</h3>";
    
    // #region - Models
    function models(header, comment, model) {
      var jsonModel = JSON.stringify(model, undefined, 2);
      return "<h3>" + header + "</h3> " + comment +
      "<pre>" + jsonModel + "</pre>";
    }

    // User Models
    function modelsUsers() {
      let landlordModel = { 
        id: 1,
        username: "landlord",
        email: "landlord@email.com",
        name: {
          title: "Title",
          firstname: "Firstname",
          middlename: "Middlename",
          lastname: "Lastname",
          suffix: "Suffix",
          preferredname: "Preferred"
        },
        address: {
          street: "1 First St",
          street2: "Suite 2",
          city: "Salt Lake City",
          state: "Utah",
          zip: "84101",
          country: "USA"
        },
        type: "landlord",
        phone: "123-456-7890"
      }
      let devModel = { 
        id: 2,
        username: "dev",
        name: {
          firstname: "Web",
          lastname: "Dev"
        },
        email: "dev@email.com",
        type: "dev"
      }
      let tenantModel = { 
        id: 3,
        username: "tenant",
        name: {
          firstname: "Tenant"
        },
        email: "tenant@email.com",
        type: "tenant"
      }
      let landlordComment = "<p class='todo'>Still updating</p>";
      let devComment = "<p class='todo'>Still updating</p>";
      let tenantComment = "<p class='todo'>Still updating</p>";

      header = "<h2>User Models</h2> ";
      outputContent = header + models("Landlord User Model", landlordComment, landlordModel) + models("Dev Model", devComment, devModel) + models("Tenant Model", tenantComment, tenantModel) ;
      output(outputContent);
    }
    
    // Property Models
    function modelsProperty() {
      let propertyModel = {
        id: 1,
        'property-name': "Name for the Property",
        'property-address': {
          street: "1 First St",
          street2: "Suite 2",
          city: "Salt Lake City",
          state: "Utah",
          zip: "84101",
          country: "USA"
        },
        'property-image': "property.jpg",
        'property-status': "occupied", // open, closed, occupied, forRent, forSale
        'property-startdate': "01-01-2001",
        'property-enddate': null,
        'landlord-id': 1
      };
      let propertyModel2 = {
        id: 2,
        'property-name': "Sample",
        'property-address': {},
        'property-status': "closed", // closed - no longer an active property
        'property-startdate': "01-01-2001",
        'property-enddate': "05-01-2018",
        'landlord-id': 1
      }
      let propertyComment = "<p class='todo'>Still updating</p>";

      header = "<h2>Property Models</h2> ";
      outputContent = header + models("Property Model 1", propertyComment, propertyModel) + models("Property Model 2", propertyComment, propertyModel2);
      output(outputContent);
    }
    
    // Tenant History Model
    function modelsTenantHistory() {
      let tenantHistoryModel = {
        id: 1,
        'tenant-id': 3,
        'property-id': 1,
        'history-startdate': "01-01-2001",
        'history-enddate': null
      }
      let tenantHistoryComment = "<p class='todo'>Still updating - This is from Database Structure.</p>";

      header = "<h2>Tenant History Model</h2> ";
      outputContent = header + models("", tenantHistoryComment, tenantHistoryModel);
      output(outputContent);
    }

  // #endregion - Models

    // #region - Database Structures
    function dbStructures(header, comment, model) {
      var jsonDB = JSON.stringify(model, undefined, 2);
      return "<h3>" + header + "</h3> " + comment +
      "<pre>" + jsonDB + "</pre>";
    }
    
    // User Table
    function dbUsers() {
      let landlordDb = { 
        id: 1,
        username: "landlord",
        email: "landlord@email.com",
        name: {
          title: "Title",
          firstname: "Firstname",
          middlename: "Middlename",
          lastname: "Lastname",
          suffix: "Suffix",
          preferredname: "Preferred"
        },
        address: {
          street: "1 First St",
          street2: "Suite 2",
          city: "Salt Lake City",
          state: "Utah",
          zip: "84101",
          country: "USA"
        },
        type: "landlord",
        phone: "123-456-7890"
      }
      let devDb = { 
        id: 2,
        username: "dev",
        name: {
          firstname: "Web",
          lastname: "Dev"
        },
        email: "dev@email.com",
        type: "dev"
      }
      let tenantDb = { 
        id: 3,
        username: "tenant",
        name: {
          firstname: "Tenant"
        },
        email: "tenant@email.com",
        type: "tenant"
      }
      let landlordComment = "<p class='todo'>Reviewing using JSON for name.</p>";
      let devComment = "<p class='todo'></p>";
      let tenantComment = "<p class='todo'></p>";

      header = "<h2> Database Structures </h2> ";
      outputContent = header + dbStructures("Landlord User", landlordComment, landlordDb) + dbStructures("Dev User", devComment, devDb) + dbStructures("Tenant User", tenantComment, tenantDb);
      output(outputContent);
    }
  
    // Properties Table
    function dbProperty() {
      let propertyDb = {
        id: 1,
        'property-name': "Name for the Property",
        'property-address': {
          street: "1 First St",
          street2: "Suite 2",
          city: "Salt Lake City",
          state: "Utah",
          zip: "84101",
          country: "USA"
        },
        'property-image': "property.jpg",
        'property-status': "occupied", // open, closed, occupied, forRent, forSale
        'property-startdate': "01-01-2001",
        'property-enddate': null,
        'landlord-id': 1
      };
      let propertyDb2 = {
        id: 2,
        'property-name': "Sample",
        'property-address': {},
        'property-status': "closed", // closed - no longer an active property
        'property-startdate': "01-01-2001",
        'property-enddate': "05-01-2018",
        'landlord-id': 1
      }
      let propertyComment = "<p class='todo'></p>";

      header = "<h2> Database Structures </h2> ";
      outputContent = header + dbStructures("Property Model 1", propertyComment, propertyDb) + dbStructures("Property Model 2", propertyComment, propertyDb2);
      output(outputContent);
    }

    // Tenant History Table
    function dbTenantHistory() {
      let tenantHistoryDb = {
        id: 1,
        'tenant-id': 3,
        'property-id': 1,
        'history-startdate': "01-01-2001",
        'history-enddate': null
      }

      outputContent = models("Tenant History Model", "", tenantHistoryDb);
      output(outputContent);
    }

    // #endregion - Database Structures
    // 
  </script>
  
</body>
</html>
